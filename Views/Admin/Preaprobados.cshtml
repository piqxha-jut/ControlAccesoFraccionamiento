@model List<ControlAccesoFraccionamiento.Models.VehiculosPreaprobado>
@{
    ViewData["Title"] = "Vehículos Preaprobados";
    Layout = "_Layout";
    
    var residentes = ViewBag.Residentes as List<ControlAccesoFraccionamiento.Models.Residente>;
    var vehiculos = ViewBag.Vehiculos as List<ControlAccesoFraccionamiento.Models.Vehiculo>;
    var hoy = DateOnly.FromDateTime(DateTime.Today);
}

<div style="max-width: 1300px; margin: 0 auto; padding: 25px 15px;">
    <!-- Encabezado -->
    <div style="background: linear-gradient(135deg, #059669, #047857); color: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 4px 12px rgba(5, 150, 105, 0.2);">
        <h2 style="margin: 0; display: flex; align-items: center; gap: 12px; font-size: 1.8rem;">
            <i class="bi bi-check-circle-fill"></i> Vehículos Preaprobados
        </h2>
        <p style="margin: 10px 0 0 0; opacity: 0.9; font-size: 1rem;">
            Gestiona los vehículos con acceso automático al fraccionamiento
        </p>
    </div>

    <!-- Mensajes -->
    @if (TempData["Mensaje"] != null)
    {
        <div style="background: #d1fae5; color: #065f46; padding: 14px 18px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #10b981; display: flex; align-items: center; gap: 10px;">
            <i class="bi bi-check-circle-fill" style="color: #10b981;"></i>
            <span>@Html.Raw(TempData["Mensaje"])</span>
        </div>
    }
    @if (TempData["Error"] != null)
    {
        <div style="background: #fee2e2; color: #991b1b; padding: 14px 18px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #ef4444; display: flex; align-items: center; gap: 10px;">
            <i class="bi bi-exclamation-circle-fill" style="color: #ef4444;"></i>
            <span>@TempData["Error"]</span>
        </div>
    }

    <!-- ============================================= -->
    <!-- SECCIÓN 1: NUEVA PREAPROBACIÓN -->
    <!-- ============================================= -->
    <div style="background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); margin-bottom: 30px;">
        <div style="background: #f0fdf4; padding: 18px 24px; border-bottom: 1px solid #bbf7d0;">
            <h3 style="margin: 0; display: flex; align-items: center; gap: 10px; color: #065f46;">
                <i class="bi bi-plus-circle"></i> Nueva Preaprobación
            </h3>
            <p style="margin: 5px 0 0 0; color: #059669; font-size: 0.95rem;">
                Crea un nuevo acceso preaprobado para un vehículo de visitante
            </p>
        </div>
        
        <div style="padding: 25px;">
            <form method="post" action="/Admin/CrearPreaprobado" onsubmit="return validarFechas()">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px;">
                    <!-- Residente -->
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">
                            <i class="bi bi-house-door"></i> Residente
                        </label>
                        <select name="residenteId" required style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; background: white; color: #4b5563;">
                            <option value="">-- Seleccionar residente --</option>
                            @if (residentes != null && residentes.Count > 0)
                            {
                                @foreach (var r in residentes)
                                {
                                    <option value="@r.Id">@r.Unidad - @r.Usuario.Nombre</option>
                                }
                            }
                            else
                            {
                                <option value="">No hay residentes activos</option>
                            }
                        </select>
                    </div>

                    <!-- Vehículo -->
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">
                            <i class="bi bi-car-front"></i> Vehículo
                        </label>
                        <select name="vehiculoId" required style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; background: white; color: #4b5563;" id="vehiculoSelect">
                            <option value="">-- Seleccionar vehículo --</option>
                            @if (vehiculos != null && vehiculos.Count > 0)
                            {
                                @foreach (var v in vehiculos)
                                {
                                    <option value="@v.Id">@v.Placa @(!string.IsNullOrEmpty(v.Marca) ? $"({v.Marca} {v.Modelo})" : "")</option>
                                }
                            }
                            else
                            {
                                <option value="">No hay vehículos disponibles para preaprobar</option>
                            }
                        </select>
                        <div style="margin-top: 6px; color: #6b7280; font-size: 0.875rem; display: flex; align-items: center; gap: 6px;">
                            <i class="bi bi-info-circle"></i>
                            Solo vehículos de visitantes. Los residentes ya tienen acceso automático.
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                    <!-- Fecha Inicio -->
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">
                            <i class="bi bi-calendar-plus"></i> Fecha Inicio
                        </label>
                        <input type="date" name="fechaInicio" id="fechaInicio" required 
                               style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;"
                               value="@DateTime.Today.ToString("yyyy-MM-dd")"
                               min="@DateTime.Today.ToString("yyyy-MM-dd")" />
                    </div>

                    <!-- Fecha Fin -->
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">
                            <i class="bi bi-calendar-minus"></i> Fecha Fin
                        </label>
                        <input type="date" name="fechaFin" id="fechaFin" required 
                               style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;"
                               value="@DateTime.Today.AddMonths(1).ToString("yyyy-MM-dd")"
                               min="@DateTime.Today.AddDays(1).ToString("yyyy-MM-dd")" />
                    </div>
                </div>

                <!-- Notas -->
                <div style="margin-bottom: 25px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151;">
                        <i class="bi bi-card-text"></i> Notas (opcional)
                    </label>
                    <textarea name="notas" rows="3" 
                              style="width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; resize: vertical;"
                              placeholder="Ej: Carpintero, Plomero, Familiar, Servicio de limpieza, etc."></textarea>
                </div>

                <!-- Botón -->
                <button type="submit" 
                        style="background: linear-gradient(135deg, #059669, #047857); color: white; padding: 12px 24px; border: none; border-radius: 6px; font-weight: 500; cursor: pointer; display: inline-flex; align-items: center; gap: 8px; transition: all 0.2s;">
                    <i class="bi bi-check-circle"></i> Crear Preaprobación
                </button>
            </form>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- SECCIÓN 2: LISTADO DE PREAPROBADOS -->
    <!-- ============================================= -->
    <div style="background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); margin-bottom: 30px;">
        <div style="background: #f0fdf4; padding: 18px 24px; border-bottom: 1px solid #bbf7d0;">
            <h3 style="margin: 0; display: flex; align-items: center; gap: 10px; color: #065f46;">
                <i class="bi bi-list-check"></i> Listado de Vehículos Preaprobados
            </h3>
            <p style="margin: 5px 0 0 0; color: #059669; font-size: 0.95rem;">
                Vehículos con acceso automático al fraccionamiento
            </p>
        </div>

        @{
            int activos = 0;
            int vencidos = 0;
            int programados = 0;
            int inactivos = 0;
        }
        
        @if (Model == null || Model.Count == 0)
        {
            <div style="padding: 60px 20px; text-align: center;">
                <i class="bi bi-car-front" style="font-size: 48px; color: #9ca3af; margin-bottom: 15px;"></i>
                <p style="color: #6b7280; font-size: 1.1rem; margin-bottom: 10px;">No hay vehículos preaprobados</p>
                <p style="color: #9ca3af;">Usa el formulario superior para crear preaprobaciones</p>
            </div>
        }
        else
        {
            <!-- Estadísticas rápidas -->
            
            <div style="padding: 20px 24px; background: #f8fafc; border-bottom: 1px solid #e5e7eb;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px;">
                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="background: #d1fae5; color: #059669; width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                <i class="bi bi-check-circle"></i>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: #6b7280;">Vigentes</div>
                                <div style="font-size: 20px; font-weight: 700; color: #065f46;" id="contadorVigentes">0</div>
                            </div>
                        </div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="background: #dbeafe; color: #2563eb; width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                <i class="bi bi-calendar"></i>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: #6b7280;">Programados</div>
                                <div style="font-size: 20px; font-weight: 700; color: #1d4ed8;" id="contadorProgramados">0</div>
                            </div>
                        </div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="background: #fef3c7; color: #d97706; width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                <i class="bi bi-clock-history"></i>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: #6b7280;">Vencidos</div>
                                <div style="font-size: 20px; font-weight: 700; color: #92400e;" id="contadorVencidos">0</div>
                            </div>
                        </div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="background: #f3f4f6; color: #6b7280; width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                <i class="bi bi-pause-circle"></i>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: #6b7280;">Inactivos</div>
                                <div style="font-size: 20px; font-weight: 700; color: #4b5563;" id="contadorInactivos">0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tabla -->
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead style="background: #f1f5f9;">
                        <tr>
                            <th style="padding: 16px; text-align: left; font-weight: 600; color: #475569; border-bottom: 1px solid #e2e8f0;">Residente</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600; color: #475569; border-bottom: 1px solid #e2e8f0;">Vehículo</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600; color: #475569; border-bottom: 1px solid #e2e8f0;">Placa</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600; color: #475569; border-bottom: 1px solid #e2e8f0;">Vigencia</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600; color: #475569; border-bottom: 1px solid #e2e8f0;">Estado</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600; color: #475569; border-bottom: 1px solid #e2e8f0;">Notas</th>
                            <th style="padding: 16px; text-align: left; font-weight: 600; color: #475569; border-bottom: 1px solid #e2e8f0;">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            var vigente = item.Activo == true && item.FechaInicio <= hoy && item.FechaFin >= hoy;
                            var vencido = item.Activo == true && item.FechaFin < hoy;
                            var programado = item.Activo == true && item.FechaInicio > hoy;

                            @if (vigente) { activos++; }
                            @if (vencido) { vencidos++; }
                            @if (programado) { programados++; }
                            @if (item.Activo == false) { inactivos++; }

                            <tr style="border-bottom: 1px solid #e5e7eb; transition: background 0.2s; @(item.Activo == false ? "background-color: #f9fafb;" : "")">
                                <!-- Residente -->
                                <td style="padding: 16px; vertical-align: middle;">
                                    <div style="font-weight: 600; color: #1e40af; display: flex; align-items: center; gap: 8px;">
                                        <i class="bi bi-house"></i> @item.Residente.Unidad
                                    </div>
                                    <div style="font-size: 13px; color: #6b7280; margin-top: 4px;">@item.Residente.Usuario.Nombre</div>
                                </td>

                                <!-- Vehículo -->
                                <td style="padding: 16px; vertical-align: middle;">
                                    @if (!string.IsNullOrEmpty(item.Vehiculo.Marca))
                                    {
                                        <div style="font-weight: 500; color: #1f2937;">@item.Vehiculo.Marca</div>
                                        <div style="font-size: 13px; color: #6b7280;">@item.Vehiculo.Modelo</div>
                                    }
                                    else
                                    {
                                        <span style="color: #9ca3af; font-style: italic;">Sin información</span>
                                    }
                                </td>

                                <!-- Placa -->
                                <td style="padding: 16px; vertical-align: middle;">
                                    <span style="background: #f1f5f9; font-family: monospace; padding: 8px 12px; border-radius: 4px; font-weight: 600; color: #1e40af; display: inline-block; border: 1px solid #dbeafe;">
                                        @item.Vehiculo.Placa
                                    </span>
                                </td>

                                <!-- Vigencia -->
                                <td style="padding: 16px; vertical-align: middle;">
                                    <div style="margin-bottom: 8px;">
                                        <div style="font-size: 12px; color: #6b7280;">Inicio:</div>
                                        <div style="font-weight: 500; color: #1f2937;">@(item.FechaInicio?.ToString("dd/MM/yy") ?? "-")</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 12px; color: #6b7280;">Fin:</div>
                                        <div style="font-weight: 500; color: #1f2937;">@(item.FechaFin?.ToString("dd/MM/yy") ?? "-")</div>
                                    </div>
                                    @if (item.FechaFin < hoy)
                                    {
                                        <div style="margin-top: 6px;">
                                            <span style="background: #fef3c7; color: #92400e; padding: 3px 8px; border-radius: 12px; font-size: 11px; font-weight: 500;">
                                                <i class="bi bi-clock"></i> Vence en @((item.FechaFin.Value.DayNumber - hoy.DayNumber)) días
                                            </span>
                                        </div>
                                    }
                                </td>

                                <!-- Estado -->
                                <td style="padding: 16px; vertical-align: middle;">
                                    @if (vigente)
                                    {
                                        <span style="background: #d1fae5; color: #065f46; padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; display: inline-flex; align-items: center; gap: 6px;">
                                            <i class="bi bi-check-circle"></i> VIGENTE
                                        </span>
                                    }
                                    else if (item.Activo == false)
                                    {
                                        <span style="background: #f3f4f6; color: #6b7280; padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; display: inline-flex; align-items: center; gap: 6px;">
                                            <i class="bi bi-pause-circle"></i> INACTIVO
                                        </span>
                                    }
                                    else if (vencido)
                                    {
                                        <span style="background: #fee2e2; color: #991b1b; padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; display: inline-flex; align-items: center; gap: 6px;">
                                            <i class="bi bi-clock-history"></i> VENCIDO
                                        </span>
                                    }
                                    else if (programado)
                                    {
                                        <span style="background: #dbeafe; color: #1d4ed8; padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; display: inline-flex; align-items: center; gap: 6px;">
                                            <i class="bi bi-calendar"></i> PROGRAMADO
                                        </span>
                                    }
                                </td>

                                <!-- Notas -->
                                <td style="padding: 16px; vertical-align: middle;">
                                    @if (!string.IsNullOrEmpty(item.Notas))
                                    {
                                        <div style="background: #f8fafc; padding: 10px 12px; border-radius: 6px; color: #4b5563; font-size: 14px; line-height: 1.4; max-width: 200px; word-wrap: break-word;">
                                            @item.Notas
                                        </div>
                                    }
                                    else
                                    {
                                        <span style="color: #9ca3af; font-size: 14px;">-</span>
                                    }
                                </td>

                                <!-- Acciones -->
                                <td style="padding: 16px; vertical-align: middle;">
                                    <div style="display: flex; flex-direction: column; gap: 8px;">
                                        <!-- Activar/Desactivar -->
                                        <form method="post" action="/Admin/CambiarEstadoPreaprobado" style="margin: 0;">
                                            <input type="hidden" name="id" value="@item.Id" />
                                            @if (item.Activo == true)
                                            {
                                                <input type="hidden" name="activo" value="false" />
                                                <button type="submit" 
                                                        style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border: none; padding: 8px 12px; border-radius: 6px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 6px; width: 100%; justify-content: center; transition: all 0.2s;">
                                                    <i class="bi bi-pause-fill"></i> Desactivar
                                                </button>
                                            }
                                            else
                                            {
                                                <input type="hidden" name="activo" value="true" />
                                                <button type="submit" 
                                                        style="background: linear-gradient(135deg, #059669, #047857); color: white; border: none; padding: 8px 12px; border-radius: 6px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 6px; width: 100%; justify-content: center; transition: all 0.2s;">
                                                    <i class="bi bi-play-fill"></i> Activar
                                                </button>
                                            }
                                        </form>

                                        <!-- Eliminar -->
                                        <form method="post" action="/Admin/EliminarPreaprobado" style="margin: 0;"
                                              onsubmit="return confirm('¿Estás seguro de eliminar la preaprobación del vehículo @item.Vehiculo.Placa para @item.Residente.Unidad?');">
                                            <input type="hidden" name="id" value="@item.Id" />
                                            <button type="submit" 
                                                    style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border: none; padding: 8px 12px; border-radius: 6px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 6px; width: 100%; justify-content: center; transition: all 0.2s;">
                                                <i class="bi bi-trash"></i> Eliminar
                                            </button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            
            <!-- Resumen al pie -->
            <div style="background: #f8fafc; padding: 15px 24px; border-top: 1px solid #e5e7eb;">
                <div style="display: flex; align-items: center; gap: 10px; color: #6b7280; font-size: 14px;">
                    <i class="bi bi-info-circle"></i>
                    <span>Total de preaprobaciones: <strong style="color: #059669;">@Model.Count</strong></span>
                </div>
            </div>
            
            <script>
                // Actualizar contadores
                document.addEventListener('DOMContentLoaded', function() {
                    document.getElementById('contadorVigentes').textContent = '@activos';
                    document.getElementById('contadorProgramados').textContent = '@programados';
                    document.getElementById('contadorVencidos').textContent = '@vencidos';
                    document.getElementById('contadorInactivos').textContent = '@inactivos';
                });
            </script>
        }
    </div>

    <!-- ============================================= -->
    <!-- SECCIÓN 3: INFORMACIÓN ADICIONAL -->
    <!-- ============================================= -->
    <div style="background: #f8fafc; padding: 25px; border-radius: 10px; border-left: 4px solid #059669; margin-bottom: 30px;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px;">
            <!-- Tipos de vehículos -->
            <div>
                <h4 style="margin: 0 0 15px 0; color: #065f46; display: flex; align-items: center; gap: 10px;">
                    <i class="bi bi-question-circle"></i> ¿Qué vehículos se pueden preaprobar?
                </h4>
                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px; color: #059669;">
                        <i class="bi bi-check-circle-fill"></i>
                        <span><strong>Vehículos de visitantes frecuentes</strong> (carpintero, plomero, familiar)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px; color: #059669;">
                        <i class="bi bi-check-circle-fill"></i>
                        <span><strong>Vehículos de servicios</strong> (paquetería, limpieza, mantenimiento)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px; color: #ef4444;">
                        <i class="bi bi-x-circle-fill"></i>
                        <span><strong>Vehículos de residentes</strong> (acceso automático siempre)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; color: #ef4444;">
                        <i class="bi bi-x-circle-fill"></i>
                        <span><strong>Vehículos en lista negra</strong> (no pueden preaprobarse)</span>
                    </div>
                </div>
            </div>

            <!-- Flujos de acceso -->
            <div>
                <h4 style="margin: 0 0 15px 0; color: #065f46; display: flex; align-items: center; gap: 10px;">
                    <i class="bi bi-diagram-3"></i> Flujos de Acceso
                </h4>
                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px; color: #3b82f6;">
                        <div style="background: #dbeafe; color: #1d4ed8; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">1</div>
                        <span><strong>Residente</strong> → Acceso inmediato</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px; color: #059669;">
                        <div style="background: #d1fae5; color: #065f46; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">2</div>
                        <span><strong>Preaprobado (VIGENTE)</strong> → Acceso inmediato</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px; color: #f59e0b;">
                        <div style="background: #fef3c7; color: #d97706; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">3</div>
                        <span><strong>Preaprobado (VENCIDO)</strong> → Notificación al residente</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px; color: #8b5cf6;">
                        <div style="background: #f3e8ff; color: #7c3aed; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">4</div>
                        <span><strong>Visitante normal</strong> → Notificación → Espera aprobación</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; color: #ef4444;">
                        <div style="background: #fee2e2; color: #dc2626; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">5</div>
                        <span><strong>Lista negra</strong> → Acceso denegado</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Botón regresar -->
    <div style="display: flex; justify-content: center; margin-top: 20px;">
        <a href="/Admin/Index" 
           style="background: #4b5563; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; font-weight: 500; transition: all 0.2s;">
            <i class="bi bi-arrow-left"></i> Regresar al Dashboard
        </a>
    </div>
</div>

<script>
    function validarFechas() {
        const fechaInicio = document.getElementById('fechaInicio').value;
        const fechaFin = document.getElementById('fechaFin').value;

        if (fechaInicio && fechaFin) {
            const inicio = new Date(fechaInicio);
            const fin = new Date(fechaFin);

            if (fin < inicio) {
                alert('La fecha fin debe ser posterior a la fecha inicio.');
                return false;
            }
        }

        return true;
    }

    // Actualizar fecha mínima de fin cuando cambia fecha inicio
    document.getElementById('fechaInicio').addEventListener('change', function() {
        const fechaInicio = this.value;
        if (fechaInicio) {
            const minFechaFin = new Date(fechaInicio);
            minFechaFin.setDate(minFechaFin.getDate() + 1);
            document.getElementById('fechaFin').min = minFechaFin.toISOString().split('T')[0];
        }
    });
</script>

<style>
    /* Efectos hover */
    table tbody tr:hover {
        background-color: #f8fafc !important;
    }
    
    button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    a[href="/Admin/Index"]:hover {
        background: #374151;
        text-decoration: none;
    }
    
    /* Responsive */
    @@media (max-width: 768px) {
        div[style*="max-width: 1300px"] {
            padding: 15px 10px;
        }
        
        .form-grid {
            grid-template-columns: 1fr !important;
        }
        
        table th, table td {
            padding: 12px 8px !important;
            font-size: 14px;
        }
        
        .stats-grid {
            grid-template-columns: repeat(2, 1fr) !important;
        }
        
        .info-grid {
            grid-template-columns: 1fr !important;
        }
    }
    
    @@media (max-width: 480px) {
        .stats-grid {
            grid-template-columns: 1fr !important;
        }
    }
</style>